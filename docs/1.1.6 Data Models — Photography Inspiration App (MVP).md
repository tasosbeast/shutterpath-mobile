

# 1.1.6 Data Models — Photography Inspiration App (MVP)

Βάσει του MVP scope και των user stories, το app χρειάζεται λίγα, καθαρά core models:  
Users, Prompts, Challenges, AI Critiques, User Progress (saves/completions) και βασικά Analytics.

Στόχος: όσο πιο απλό γίνεται για Supabase/Firebase, αλλά αρκετά δομημένο για να μη γίνει spaghetti αργότερα.

---

## 1. User

**Purpose:** Βασικός λογαριασμός χρήστη + προφίλ.

**Fields (ενδεικτικά):**

- `id` (string / uuid) – Primary key
    
- `email` (string, unique) – Login
    
- `password_hash` (string, optional αν το χειρίζεται ο provider)
    
- `provider` (enum: 'email', 'google', 'apple', ...)
    
- `username` (string) – Display name
    
- `avatar_url` (string, nullable) – Future use
    
- `created_at` (timestamp)
    
- `updated_at` (timestamp)
    
- `last_login_at` (timestamp, nullable)
    

**Relationships:**

- 1–N με:
    
    - `photo_critiques`
        
    - `challenge_completions`
        
    - `user_saved_prompts`
        
    - `user_saved_challenges`
        
    - `analytics_events`
        

---

## 2. Prompt (Daily Inspiration)

**Purpose:** Το “daily inspiration” περιεχόμενο.

**Fields:**

- `id` (string / uuid)
    
- `title` (string) – π.χ. “Leading Lines in the City”
    
- `slug` (string, unique, optional)
    
- `description` (text) – 2–3 προτάσεις guidance
    
- `reference_image_url` (string, nullable) – link σε storage
    
- `available_from` (date / timestamp) – από ποια μέρα εμφανίζεται στο feed
    
- `available_to` (date / timestamp, nullable) – αν θέλεις να λήγει
    
- `created_at` (timestamp)
    
- `updated_at` (timestamp)
    
- `is_active` (boolean, default: true)
    

**Notes:**

- Το “1 prompt per day” μπορεί να βγαίνει από `available_from` vs current date.
    
- Μπορείς να φορτώνεις και προηγούμενα με βάση `available_from` DESC.
    

---

## 3. Challenge (Daily Challenge)

**Purpose:** Προπονητικό challenge με συγκεκριμένο focus.

**Fields:**

- `id` (string / uuid)
    
- `title` (string) – π.χ. “Shoot Only in Black & White”
    
- `description` (text, optional) – μικρή περιγραφή
    
- `focus_points` (json / text) – λίστα με 2–3 bullets (π.χ. array of strings)
    
- `difficulty` (enum: 'easy' | 'medium' | 'hard', optional)
    
- `available_from` (date / timestamp) – ημερομηνία “daily challenge”
    
- `created_at` (timestamp)
    
- `updated_at` (timestamp)
    
- `is_active` (boolean)
    

**Notes:**

- Για MVP αρκεί να έχεις ένα challenge per day (ίδιο pattern με prompts).
    
- Τα `focus_points` μπορεί να είναι JSON array: `["Πρόσεξε το φως", "Δούλεψε με μία εστίαση", ...]`.
    

---

## 4. UserSavedPrompt

**Purpose:** Ποια prompts έχει κάνει “save” ο χρήστης.

**Fields:**

- `id` (string / uuid)
    
- `user_id` (fk → User.id)
    
- `prompt_id` (fk → Prompt.id)
    
- `created_at` (timestamp)
    

**Constraints:**

- Unique constraint (`user_id`, `prompt_id`) – δεν θέλουμε duplicate saves.
    

---

## 5. UserSavedChallenge

**Purpose:** Ποια challenges έχει αποθηκεύσει ο χρήστης.

**Fields:**

- `id` (string / uuid)
    
- `user_id` (fk → User.id)
    
- `challenge_id` (fk → Challenge.id)
    
- `created_at` (timestamp)
    

**Constraints:**

- Unique (`user_id`, `challenge_id`)
    

---

## 6. ChallengeCompletion

**Purpose:** Να ξέρουμε τι έχει ολοκληρώσει ο χρήστης, για progress & streaks.

**Fields:**

- `id` (string / uuid)
    
- `user_id` (fk → User.id)
    
- `challenge_id` (fk → Challenge.id)
    
- `completed_at` (timestamp) – όταν το μαρκάρει completed
    
- `source` (string, optional) – π.χ. 'daily', 'saved', future use
    

**Notes:**

- Streaks μπορούν να υπολογίζονται server-side από τα `completed_at` (ημέρες με τουλάχιστον 1 completion).
    

---

## 7. PhotoCritique (AI Critique Submission)

**Purpose:** Κάθε φορά που ο χρήστης ανεβάζει μια φωτογραφία για AI feedback.

**Fields:**

- `id` (string / uuid)
    
- `user_id` (fk → User.id)
    
- `image_url` (string) – path σε Firebase/Supabase storage
    
- `strengths` (json / text) – list of strings (3 items)
    
- `improvements` (json / text) – list of strings (3 items)
    
- `tip` (text) – 1 actionable tip
    
- `model_version` (string, optional) – π.χ. “gpt-4.1-vision”
    
- `created_at` (timestamp)
    
- `processing_ms` (integer, optional)
    
- `error` (text, nullable) – αν κάτι πάει στραβά
    

**Notes:**

- Η εικόνα ΔΕΝ αποθηκεύεται στο DB, μόνο το URL.
    
- Rate limiting για MVP μπορεί να βασιστεί στο `created_at` (π.χ. max 1 κάθε X ώρες ανά user).
    

---

## 8. UserStreakSnapshot (optional αλλά χρήσιμο)

**Purpose:** Να μην υπολογίζεις κάθε φορά από το μηδέν το streak.

Μπορείς να τον παραλείψεις στην πρώτη φάση και να υπολογίζεις alles on the fly. Αν όμως θέλεις explicit table:

**Fields:**

- `user_id` (fk → User.id, pk)
    
- `current_streak_days` (integer)
    
- `longest_streak_days` (integer)
    
- `last_activity_date` (date) – τελευταία μέρα που έκανε “κάτι” (π.χ. completed challenge)
    
- `updated_at` (timestamp)
    

**Notes:**

- The “activity” που μετράει για streak μπορεί να είναι μόνο `ChallengeCompletion` (MVP) για να μην μπλέξεις με prompts/critique.
    

---

## 9. AnalyticsEvent

**Purpose:** Ενιαίο, απλό event log για τα τρία βασικά events του MVP:  
`prompt_view`, `challenge_completion`, `critique_used`.

**Fields:**

- `id` (string / uuid)
    
- `user_id` (fk → User.id, nullable αν anonymous)
    
- `event_type` (enum: 'prompt_view' | 'challenge_complete' | 'critique_used')
    
- `entity_type` (string, optional) – π.χ. 'prompt', 'challenge', 'critique'
    
- `entity_id` (string, optional) – id του σχετικού entity
    
- `metadata` (json, nullable) – μικρά extra (π.χ. device, app_version)
    
- `created_at` (timestamp)
    

**Notes:**

- Αν χρησιμοποιήσεις Firebase Analytics, αυτό μπορεί να είναι conceptual model, όχι actual table.
    
- Για Supabase/Postgres, ένα απλό append-only table με partitioning αργότερα είναι οκ.
    

---

## 10. System Meta (Content Management Light)

Για να μη χρειαστείς full CMS, μπορείς να έχεις ένα πολύ απλό μοντέλο:

### 10.1 AdminUser (optional)

Αν αργότερα θελήσεις web panel, μπορείς να reuse το ίδιο `User` model με role:

- ΠΡΟΣΘΗΚΗ στο `User`:
    
    - `role` (enum: 'user' | 'admin')
        

Έτσι ξεχωρίζεις ποιος μπορεί να δημιουργεί/επεξεργάζεται prompts/challenges.

---

## 11. High-Level Relationships Overview

Σε χαλαρό ERD στυλ:

- **User**
    
    - has many `UserSavedPrompts`
        
    - has many `UserSavedChallenges`
        
    - has many `ChallengeCompletions`
        
    - has many `PhotoCritiques`
        
    - has many `AnalyticsEvents`
        
- **Prompt**
    
    - has many `UserSavedPrompts`
        
    - is referenced by `AnalyticsEvent` (prompt_view)
        
- **Challenge**
    
    - has many `UserSavedChallenges`
        
    - has many `ChallengeCompletions`
        
    - is referenced by `AnalyticsEvent` (challenge_complete)
        
- **PhotoCritique**
    
    - is referenced by `AnalyticsEvent` (critique_used)
        

---

## 12. Mapping to WBS & MVP Features

Το παραπάνω set καλύπτει:

- **Daily Inspiration Feed:** `Prompt`, `AnalyticsEvent (prompt_view)`
    
- **Daily Challenges:** `Challenge`, `UserSavedChallenge`, `ChallengeCompletion`, `AnalyticsEvent (challenge_complete)`
    
- **AI Critique:** `PhotoCritique`, `AnalyticsEvent (critique_used)`
    
- **User Profile + Streaks:** `User`, `UserSavedPrompt`, `UserSavedChallenge`, `ChallengeCompletion`, `UserStreakSnapshot`
    
- **Analytics:** 1 generic `AnalyticsEvent` table / concept.
    

Αυτό ολοκληρώνει το **WBS 1.1.6 – Data Models** με minimal αλλά production-ready δομή. Από εδώ, το επόμενο βήμα είναι να το μεταφράσουμε σε πραγματικά schemas (π.χ. Supabase tables) και να τα σπάσεις σε tasks στο Trello (Backlog → “8.1 Backend Init / DB setup”).